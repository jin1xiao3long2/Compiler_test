## 7日(7.21-7.28)todoList

### 修改文法,以支持SLR分析

#### 已有内容:

***test.ebnf*** 以提供测试用例

***parsergen.csp*** 以提供token生成与树的生成

***ebnf_parser.csp*** 以提供生成token与树的规则

***ebnf_ast_translator*** 翻译器/树遍历器,可用树进行代码的生成或分析


#### 步骤

+ 分析树,将 **ebnf** 文法修改为 **bnf** 文法,即将重复 **{}**, 可选项 **[]**, 分组项 **()**, 或项 **E|S**修改为bnf语法(可生成中间 **(.csp)** 文件)
+ 修改成功后,以新树进行分析, 判断是否能够使用SLR分析(判断是否存在**移进-规约冲突**),若不能,则抛出错误。


##### 分析树

###### 步骤

+  遍历树，分割**statement**对象
+  分析树结构，实现递归翻译（定义翻译规则）

###### 规则

+ S ::= {E}    **（重复项）** rename(需要多层)
  + S ::= S1
    + S1 ::= ε
    + S1 ::= ES
+ S ::= [E]   **（可选项）** add（分裂成两个表达式）
  + S ::= ε
  + S ::= E
+ S ::= E | F   **（或项）** add（分裂成多个表达式）
  + S ::= E
  + S ::= F
+ S ::= A(E|F)B **（分组项）** rename 需要多层（两层及以上）)翻译
  + S ::= ACB
  + C ::= E | F
    + C ::= E
    + C ::= F

示例：

E ::= S{T}\[D](F|G)

E ::= SE1DE2|SE1E2
E1 ::= TE1
E1 ::= ε
E2 ::= F
E2 ::= G

（PS： SLR分析不需要考虑左递归，左结合的影响）

##### 判断是否能够使用SLR分析

###### 步骤

+ 翻译LR(0)项 
+ 构建NFA（LR(0)项的有限自动状态机）
+ 构建DNF（子集法确定化）
+ 判断是否拥有**移进-规约冲突**（判断文法）
+ 报错或返回生成 **(xxx_parser.csp)** 文件


###### SLR文法判定

SLR文法不存在归约-归约冲突，有可能存在移进-归约冲突，但是如果可以用 follow集解决则是 SLR文法。换句话说，SLR文法分析过程可以解决归约-归约冲突，但是不一定能解决移进-归约冲突。用 follow集来处理即出现移进-归约冲突的两条产生式，如果其 follow集相交为空则为 SLR文法，反之不是。当然，如果以上两种冲突都不存在自然是了。


